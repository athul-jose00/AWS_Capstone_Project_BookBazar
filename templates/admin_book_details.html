{% extends 'base.html' %}
{% block title %}Edit Book | Admin Dashboard | BookBazaar{% endblock %}
{% block body_class %}admin-page{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="/static/css/dashboard.css" />
<link rel="stylesheet" href="/static/css/admin_dashboard.css" />
{% endblock %}
{% block header %}
<header class="site-header">
  <a class="logo" href="/"> <i class="fas fa-book-open"></i> BookBazaar </a>
  <nav class="nav-actions">
    <span class="nav-link" style="color: var(--accent-teal)">
      <i class="fas fa-user-shield"></i> {{ user.name }}
    </span>
    <a href="{{ url_for('logout') }}" class="btn btn-primary btn-nav">
      <i class="fas fa-sign-out-alt"></i> Logout
    </a>
  </nav>
</header>
{% endblock %}
{% block content %}
<div class="dashboard-layout">
  {% include '_admin_sidebar.html' %}
  <div class="dashboard-container admin-dashboard">
    <div class="profile-panel">
      <div class="admin-header">
        <h1><i class="fas fa-edit"></i> Edit Book</h1>
        <p class="admin-subtitle">
          <a href="{{ url_for('admin_books') }}">&larr; Back to Books</a>
        </p>
      </div>

      <div class="admin-section">
        <div class="form-card">
          <form method="POST" class="admin-form">
            <div class="form-row">
              <div class="form-group">
                <label for="title">Title *</label>
                <input 
                  type="text" 
                  id="title" 
                  name="title" 
                  value="{{ book.title }}" 
                  required 
                  class="form-control"
                />
              </div>
              <div class="form-group">
                <label for="author">Author *</label>
                <input 
                  type="text" 
                  id="author" 
                  name="author" 
                  value="{{ book.author }}" 
                  required 
                  class="form-control"
                />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="price">Price *</label>
                <input 
                  type="number" 
                  id="price" 
                  name="price" 
                  value="{{ book.price }}" 
                  step="0.01" 
                  required 
                  class="form-control"
                />
              </div>
              <div class="form-group">
                <label for="stock">Stock *</label>
                <input 
                  type="number" 
                  id="stock" 
                  name="stock" 
                  value="{{ book.stock }}" 
                  required 
                  class="form-control"
                />
              </div>
              <div class="form-group">
                <label for="genre">Genre</label>
                <input 
                  type="text" 
                  id="genre" 
                  name="genre" 
                  value="{{ book.genre }}" 
                  class="form-control"
                />
              </div>
            </div>

            <div class="form-group">
              <label for="summary">Summary</label>
              <textarea 
                id="summary" 
                name="summary" 
                rows="4" 
                class="form-control"
              >{{ book.summary }}</textarea>
            </div>

            <div class="form-group">
              <label for="cover_url">Cover URL</label>
              <input 
                type="text" 
                id="cover_url" 
                name="cover_url" 
                value="{{ book.cover_url }}" 
                class="form-control"
              />
            </div>

            <div class="form-actions">
              <button type="submit" class="btn btn-primary btn-lg">
                <i class="fas fa-save"></i> Save Changes
              </button>
              <a href="{{ url_for('admin_books') }}" class="btn btn-secondary btn-lg">
                <i class="fas fa-times"></i> Cancel
              </a>
            </div>
          </form>

          <hr style="margin: 2rem 0;">

          <div class="danger-zone">
            <h3>Danger Zone</h3>
            <p>Once you delete a book, there is no going back. Please be certain.</p>
            <form method="POST" action="{{ url_for('admin_delete_book', book_id=book.id) }}" onsubmit="return confirm('Are you sure you want to delete this book? This action cannot be undone.');">
              <button type="submit" class="btn btn-danger btn-lg">
                <i class="fas fa-trash"></i> Delete Book
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
