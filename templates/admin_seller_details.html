{% extends 'base.html' %} {% block title %}Seller Details | Admin Dashboard |
BookBazaar{% endblock %} {% block body_class %}admin-page{% endblock %} {% block
extra_css %}
<link rel="stylesheet" href="/static/css/dashboard.css" />
<link rel="stylesheet" href="/static/css/admin_dashboard.css" />
{% endblock %} {% block header %}
<header class="site-header">
  <a class="logo" href="/"> <i class="fas fa-book-open"></i> BookBazaar </a>
  <nav class="nav-actions">
    <span class="nav-link" style="color: var(--accent-teal)">
      <i class="fas fa-user-shield"></i> {{ user.name }}
    </span>
    <a href="{{ url_for('logout') }}" class="btn btn-primary btn-nav">
      <i class="fas fa-sign-out-alt"></i> Logout
    </a>
  </nav>
</header>
{% endblock %} {% block content %}
<div class="dashboard-layout">
  {% include '_admin_sidebar.html' %}
  <div class="dashboard-container admin-dashboard">
    <div class="profile-panel">
      <div class="admin-header">
        <h1><i class="fas fa-store"></i> Seller Details</h1>
        <p class="admin-subtitle">
          <a href="{{ url_for('admin_sellers') }}">&larr; Back to Sellers</a>
        </p>
      </div>

      <div class="admin-section">
        <div class="detail-card">
          <h2>Seller Information</h2>
          <div class="detail-grid">
            <div class="detail-item">
              <label>Email</label>
              <p>{{ seller.email }}</p>
            </div>
            <div class="detail-item">
              <label>Name</label>
              <p>{{ seller.name }}</p>
            </div>
            <div class="detail-item">
              <label>Total Revenue</label>
              <p>${{ "%.2f"|format(seller.total_revenue) }}</p>
            </div>
            <div class="detail-item">
              <label>Books Listed</label>
              <p>{{ seller.books|length }}</p>
            </div>
            <div class="detail-item">
              <label>Orders Received</label>
              <p>{{ seller.received_orders|length }}</p>
            </div>
          </div>
        </div>

        <div class="detail-card">
          <h2>
            <i class="fas fa-book"></i> Books Listed ({{ seller.books|length }})
          </h2>
          {% if seller.books %}
          <div class="table-container">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Title</th>
                  <th>Author</th>
                  <th>Price</th>
                  <th>Stock</th>
                  <th>Genre</th>
                </tr>
              </thead>
              <tbody>
                {% for book in seller.books %}
                <tr>
                  <td>{{ book.title }}</td>
                  <td>{{ book.author }}</td>
                  <td>${{ "%.2f"|format(book.price) }}</td>
                  <td>{{ book.stock }}</td>
                  <td>{{ book.genre }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          {% else %}
          <p class="text-muted">No books listed by this seller.</p>
          {% endif %}
        </div>

        <div class="detail-card">
          <h2>
            <i class="fas fa-inbox"></i> Orders Received ({{
            seller.received_orders|length }})
          </h2>
          {% if seller.received_orders %}
          <div class="table-container">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Order ID</th>
                  <th>Customer</th>
                  <th>Status</th>
                  <th>Total</th>
                  <th>Items</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody>
                {% for order in seller.received_orders %}
                <tr>
                  <td>{{ order.id }}</td>
                  <td>{{ order.buyer.name if order.buyer else 'Unknown' }}</td>
                  <td>
                    <span class="badge badge-{{ order.status|lower }}"
                      >{{ order.status }}</span
                    >
                  </td>
                  <td>${{ "%.2f"|format(order.total) }}</td>
                  <td>{{ order['items']|length }}</td>
                  <td>
                    {{ order.created_at[:10] if order.created_at else 'N/A' }}
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          {% else %}
          <p class="text-muted">No orders received yet.</p>
          {% endif %}
        </div>

        <div class="form-actions">
          <a
            href="{{ url_for('admin_user_details', email=seller.email) }}"
            class="btn btn-info btn-lg"
          >
            <i class="fas fa-user"></i> View Full Account
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
